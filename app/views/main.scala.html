@import model.Station
@(title: String, stations: Seq[Station])(content: Html)
<!DOCTYPE html>
<html>
    <head>
        <title>@title</title>
        <meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8">
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB4p-HStRDTOnsonu2pcKeIkDWXS0D6g28&callback=initMap"
        async defer></script>
        <style>
                #map {
                    height: 100%;
                }

                html, body {
                    height: 100%;
                    margin: 0;
                    padding: 0;
                }
        </style>
    </head>

    <body>
        <div id="map"></div>
        <table id="tempStationsTable">
            @for(station <- stations){
                <tr>
                    <th>@station.id</th>
                    <th>@station.stationName</th>
                    <th>@station.geogrLat</th>
                    <th>@station.geogrLng</th>
                </tr>
            }
        </table>
        <script>
                var map;
                function initMap() {
                    map = new google.maps.Map(document.getElementById('map'), {
                        center: {lat: 50.068000, lng: 19.912410},
                        zoom: 8
                    });

                    map.data.setStyle(function (feature) {
                        return {
                            title: feature.getProperty('name'),
                            optimized: false
                        };
                    });

                    setStationPoints();
                }

                function setStationPoints() {
                    var table = document.getElementById('tempStationsTable');
                    var rows = table.rows;
                    for (var r = 0, n = rows.length; r < n; r++) {
                        var name = String(rows[r].cells[1].innerHTML);
                        var lan = parseFloat(String(rows[r].cells[2].innerHTML));
                        var lng = parseFloat(String(rows[r].cells[3].innerHTML));
                        addCity(name,lan,lng);
                    }
                    table.parentNode.removeChild(table);
                }

                function addCity(name, latitude, longitude) {
                    var marker = new google.maps.Marker({
                        position: {lat: latitude, lng: longitude},
                        label: ' ',
                        map: map
                    });
                    marker.addListener('click', function () {
                        alert(name)
                    });
                }

        </script>

    </body>
</html>